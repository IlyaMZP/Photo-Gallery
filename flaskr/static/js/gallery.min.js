$(function(){$("#header");var e,i,n=$("#frame"),t=$("#slider"),s=$("#themes"),a=$("#nav"),c=n.find(".photo"),r=n.find(".loading"),l=n.children(".photo-caption"),d=t.children("#thumbnails"),o=t.children("span"),h=0,p=1;function f(e){thumb=thumbnails.querySelector("[data-index='"+e+"']"),r.show(),c.attr("src",thumb.dataset.fullimg)}function u(e){i&&i.removeClass("selected"),(i=$(e)).addClass("selected")}function m(){i.removeClass("selected"),(i=i.next()).addClass("selected")}function v(){d.children().each(function(){h+=$(this).outerWidth(!0)}),e=d.children(":first"),b(),x("prev",!1)}function b(){slider_width=t.innerWidth(),slider_width<h&&"none"==o.css("display")?o.css("display","block"):slider_width>=h&&"block"==o.css("display")&&o.css("display","none")}function x(e,i){$btn=t.children("."+e),i?$btn.removeClass("disable"):$btn.addClass("disable")}function g(){return d.children(":last").position().top}$(function(){firstThumbnail=d.children(":first"),u(firstThumbnail),thumb=thumbnails.querySelector("[data-index='"+p+"']"),c.attr("src",thumb.dataset.fullimg);var e=firstThumbnail.children("img");e[0].complete?v():e.on("load",v),$("body").css("opacity","1")}),d.on("click","img",function(e){$this=$(this);var i=parseInt($this.data("index"),10);f(i),u($this.parent("li")),p=i}),c.on("click",function(e){p<$("[data-index]").length&&(p++,m(),t.find(".next").trigger("click"),f(p))}),c.on("load",function(e){r.hide()}),a.on("click","button",function(e){var n=this.className;n.indexOf("prev")>=0&&p>1?(p--,i.removeClass("selected"),(i=i.prev()).addClass("selected"),t.find(".prev").trigger("click"),f(p)):n.indexOf("next")>=0&&p<$("[data-index]").length&&(p++,m(),t.find(".next").trigger("click"),f(p))}),$(window).on("resize",function(){b(),d.children().css("display","inline-block"),e=d.children(":first"),x("prev",!1),x("next",!0)}),t.on("click","span",function(i){var n=i.target.className,t=d.children(":first"),s=g();n.indexOf("prev")>=0&&"none"==t.css("display")?($prev=e.prev(),$prev.length>0&&(e=$prev),e.css("display","inline-block"),t[0]===e[0]&&x("prev",!1),x("next",!0)):n.indexOf("next")>=0&&s>0&&(e.css("display","none"),e=e.next(),x("prev",!0),0===g()&&x("next",!1))}),s.on("click","span",function(e){$this=$(this),theme=$this.data("theme"),$this.hasClass("active")||("another"==theme?($('link[href="/static/css/original.min.css"]').attr({href:"/static/css/another.min.css"}),a.appendTo("#frame"),l.appendTo(".photo-wrapper")):($('link[href="/static/css/another.min.css"]').attr({href:"/static/css/original.min.css"}),a.appendTo("#header"),l.appendTo("#frame")),s.children(".active").removeClass("active"),$this.addClass("active"))})});
