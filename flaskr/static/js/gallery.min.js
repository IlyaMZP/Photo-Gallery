$(function(){$("#header");var e,t,i=$("#frame"),n=$("#slider"),a=$("#themes"),s=$("#nav"),r=i.find(".photo"),c=i.find(".loading"),l=i.children(".photo-caption"),d=n.children("#thumbnails"),o=(n.children("span"),1);function h(e){thumb=thumbnails.querySelector("[data-index='"+e+"']"),c.show(),r.attr("src",thumb.dataset.fullimg)}function m(e){t&&t.removeClass("selected"),(t=$(e)).addClass("selected")}function f(){t.removeClass("selected"),(t=t.next()).addClass("selected")}function p(){d.children().each(function(){$(this).outerWidth(!0)}),e=d.children(":first"),u("prev",!1)}function u(e,t){$btn=n.children("."+e),t?$btn.removeClass("disable"):$btn.addClass("disable")}function g(){return d.children(":last").position().top}$(function(){"another"==localStorage.getItem("theme")?a.children('[data-theme="another"]').trigger("click"):a.children('[data-theme="original"]').trigger("click"),firstThumbnail=d.children(":first"),m(firstThumbnail),thumb=thumbnails.querySelector("[data-index='"+o+"']"),r.attr("src",thumb.dataset.fullimg);var e=firstThumbnail.children("img");e[0].complete?p():e.on("load",p),$("body").css("opacity","1")}),d.on("click","img",function(e){$this=$(this);var t=parseInt($this.data("index"),10);h(t),m($this.parent("li")),o=t}),r.on("click",function(e){o<$("[data-index]").length&&(o++,f(),n.find(".next").trigger("click"),h(o))}),r.on("load",function(e){c.hide()}),s.on("click","button",function(e){var i=this.className;i.indexOf("prev")>=0&&o>1?(o--,t.removeClass("selected"),(t=t.prev()).addClass("selected"),n.find(".prev").trigger("click"),h(o)):i.indexOf("next")>=0&&o<$("[data-index]").length&&(o++,f(),n.find(".next").trigger("click"),h(o))}),n.on("click","span",function(t){var i=t.target.className,n=d.children(":first"),a=g();i.indexOf("prev")>=0&&"none"==n.css("display")?($prev=e.prev(),$prev.length>0&&(e=$prev),e.css("display","inline-block"),n[0]===e[0]&&u("prev",!1),u("next",!0)):i.indexOf("next")>=0&&a>0&&(e.css("display","none"),e=e.next(),u("prev",!0),0===g()&&u("next",!1))}),a.on("click","span",function(e){$this=$(this),theme=$this.data("theme"),$this.hasClass("active")||("another"==theme?(localStorage.setItem("theme","another"),$('link[href="/static/css/original.min.css"]').attr({href:"/static/css/another.min.css"}),s.appendTo("#frame"),l.appendTo(".photo-wrapper")):(localStorage.setItem("theme","original"),$('link[href="/static/css/another.min.css"]').attr({href:"/static/css/original.min.css"}),s.appendTo("#header"),l.appendTo("#frame")),a.children(".active").removeClass("active"),$this.addClass("active"))})});
