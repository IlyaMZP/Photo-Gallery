$(function(){$("#header");var e,i,t=$("#frame"),n=$("#slider"),s=$("#themes"),a=$("#nav"),c=t.find(".photo"),r=t.children(".photo-caption"),l=n.children("#thumbnails"),d=n.children("span"),o=0,h=1;function p(e){thumb=thumbnails.querySelector("[data-index='"+e+"']"),c.attr("src",""),c.attr("src",thumb.dataset.fullimg)}function f(e){i&&i.removeClass("selected"),(i=$(e)).addClass("selected")}function m(){i.removeClass("selected"),(i=i.next()).addClass("selected")}function u(){l.children().each(function(){o+=$(this).outerWidth(!0)}),e=l.children(":first"),v(),b("prev",!1)}function v(){slider_width=n.innerWidth(),slider_width<o&&"none"==d.css("display")?d.css("display","block"):slider_width>=o&&"block"==d.css("display")&&d.css("display","none")}function b(e,i){$btn=n.children("."+e),i?$btn.removeClass("disable"):$btn.addClass("disable")}function x(){return l.children(":last").position().top}$(function(){firstThumbnail=l.children(":first"),f(firstThumbnail),thumb=thumbnails.querySelector("[data-index='"+h+"']"),c.attr("src",thumb.dataset.fullimg);var e=firstThumbnail.children("img");e[0].complete?u():e.on("load",u),$("body").css("opacity","1")}),l.on("click","img",function(e){$this=$(this);var i=parseInt($this.data("index"),10);p(i),f($this.parent("li")),h=i}),c.on("click",function(e){h<$("[data-index]").length&&(h++,m(),n.find(".next").trigger("click"),p(h))}),a.on("click","button",function(e){var t=this.className;t.indexOf("prev")>=0&&h>1?(h--,i.removeClass("selected"),(i=i.prev()).addClass("selected"),n.find(".prev").trigger("click"),p(h)):t.indexOf("next")>=0&&h<$("[data-index]").length&&(h++,m(),n.find(".next").trigger("click"),p(h))}),$(window).on("resize",function(){v(),l.children().css("display","inline-block"),e=l.children(":first"),b("prev",!1),b("next",!0)}),n.on("click","span",function(i){var t=i.target.className,n=l.children(":first"),s=x();t.indexOf("prev")>=0&&"none"==n.css("display")?($prev=e.prev(),$prev.length>0&&(e=$prev),e.css("display","inline-block"),n[0]===e[0]&&b("prev",!1),b("next",!0)):t.indexOf("next")>=0&&s>0&&(e.css("display","none"),e=e.next(),b("prev",!0),0===x()&&b("next",!1))}),s.on("click","span",function(e){$this=$(this),theme=$this.data("theme"),$this.hasClass("active")||("another"==theme?($('link[href="/static/css/original.min.css"]').attr({href:"/static/css/another.min.css"}),a.appendTo("#frame"),r.appendTo(".photo-wrapper")):($('link[href="/static/css/another.min.css"]').attr({href:"/static/css/original.min.css"}),a.appendTo("#header"),r.appendTo("#frame")),s.children(".active").removeClass("active"),$this.addClass("active"))})});
